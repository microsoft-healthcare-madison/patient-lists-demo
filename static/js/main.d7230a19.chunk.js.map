{"version":3,"sources":["components/HeaderPanel.js","api.js","components/FHIRResource.js","components/ListsPanel.js","components/DeveloperPanel.js","components/PatientsPanel.js","components/AttributesPanel.js","App.js","serviceWorker.js","index.js"],"names":["ServerInputForm","props","React","useState","serverRootURL","setServerRootURL","validURL","tagSystem","setTagSystem","tagCode","setTagCode","isSettingsOpen","setIsSettingsOpen","showPassword","setShowPassword","token","setToken","lockButton","content","icon","minimal","onClick","isOpen","keepChildrenMounted","className","onSubmit","event","preventDefault","setBearerToken","type","value","onChange","target","trim","placeholder","rightElement","onInput","disabled","HeaderPanel","bearerToken","this","developerMessages","setDeveloperMessages","Component","getRefsFrom","bundle","code","resources","entry","map","e","resource","filter","Boolean","getResources","ch7istics","flatMap","x","characteristic","coding","some","c","system","getCharacteristics","locations","Set","valueReference","reference","sort","resourceUrl","progressCallback","a","bundles","url","authorization","headers","Authorization","fetch","undefined","then","response","json","push","newBundle","pop","next","link","relation","length","total","filterLists","lists","selections","listsCopy","console","warn","b","left","name","right","localeCompare","Resource","resourceType","id","display","getHoverData","hoverContent","attribute","key","style","fontWeight","transitionDuration","intent","boundary","hoverCloseDelay","enforceFocus","ListSelector","selectedList","setSelectedList","handleListSelection","selectedValue","href","encodeURI","color","rel","actual","member","ResourceRow","ListsPanel","state","groups","groupsIncluded","locationsIncluded","serverRoot","bind","loaded","includes","params","encodedParamString","kv","encodeURIComponent","join","query","stateLocation","validator","drain","getRefreshQueryUrl","newState","included","setState","setPatients","refreshResources","refreshData","list","cachedPatients","members","memberRefs","entity","log","r","has","resolvePatients","overflowY","DeveloperPanel","messages","isHidden","setIsHidden","zIndex","position","title","patientAttributeGetters","p","patient","officialNames","use","names","given","fn","family","replace","ageMs","Date","now","parse","birthDate","Math","trunc","getUTCFullYear","gender","PatientsPanel","patients","attributeGetters","getters","extraAttributeGetters","columns","condensed","interactive","slice","getter","getRow","row","col","i","ExtraAttributesPanel","what","setColumns","setExtraAttributeGetters","checked","handleAttributeSelected","isChecked","App","useEffect","message","d","window","location","hostname","match","DemoApp","strict","StrictMode","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","registration","unregister","catch","error"],"mappings":"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","file":"static/js/main.d7230a19.chunk.js","sourcesContent":["import React from 'react';\nimport 'components/HeaderPanel.css'\nimport { Button, Collapse, InputGroup, Tooltip } from \"@blueprintjs/core\";\n\nconst appTitle = \"Patient Lists Demo App\";\n\n// NICE: Remake this as a NavBar: https://blueprintjs.com/docs/#core/components/navbar\n//       The Server Root URL can be part of a Settings Cog, then.\n\n// EASY: add a blueprint Toast when a server entry has been entered and accpeted:\n//       https://blueprintjs.com/docs/#core/components/toast\n\nfunction ServerInputForm(props) {\n  const [serverRootURL, setServerRootURL] = React.useState(props.serverRootURL);\n  const [validURL, setValidURL] = React.useState(true);\n  const [tagSystem, setTagSystem] = React.useState(props.tagSystem);\n  const [tagCode, setTagCode] = React.useState(props.tagCode)\n  const [isSettingsOpen, setIsSettingsOpen] = React.useState(false);\n  const [showPassword, setShowPassword] = React.useState(false);\n  const [token, setToken] = React.useState('');\n\n  const applySettingsButton = (event) => {\n    event.preventDefault();\n    props.setServerRootURL(serverRootURL);\n    props.setTagCode(tagCode);\n    props.setTagSystem(tagSystem);\n    props.setBearerToken(token);\n  }\n\n  // Updates the input field value as the user enters new values.\n  const serverRootChanged = (event) => {\n    const value = event.target.value.trim();\n    setServerRootURL(value);\n    /*\n    try {\n      new URL(value);\n      fetch(value + '/CapabilityStatement')\n        .then(() => setValidURL(true))\n        .catch(() => setValidURL(false));\n    } catch(e) {\n      setValidURL(false);\n    }\n    */\n  }\n\n  // Updates the input field as the user enters new values.\n  const tagSystemChanged = (event) => {\n    setTagSystem(event.target.value.trim());\n  }\n\n  // Updates the input field as the user enters new values.\n  const tagCodeChanged = (event) => {\n    setTagCode(event.target.value.trim());\n  }\n\n  const lockButton = (\n    <Tooltip content={`${showPassword ? \"Hide\" : \"Show\"} Password`}>\n      <Button\n        icon={showPassword ? \"unlock\" : \"lock\"}\n        minimal={true}\n        onClick={() => setShowPassword(!showPassword)}\n      />\n    </Tooltip>\n  );\n\n  const tokenInput = (event) => {\n    setToken(event.target.value);\n  }\n\n  // TODO: replace this homebrewed form with a blueprint FormGroup, maybe.\n  return (\n    <>\n      <Button\n        onClick={ () => { setIsSettingsOpen(!isSettingsOpen); } }\n      >{ isSettingsOpen ? \"Hide\" : \"Show\" } Settings</Button>\n      <Collapse\n        isOpen={isSettingsOpen}\n        keepChildrenMounted={true}\n      >\n        <form className=\"server\" onSubmit={applySettingsButton}>\n          <label>FHIR Server Root</label>\n          &nbsp;\n          <input\n            className=\"url\"\n            type=\"text\"\n            value={serverRootURL}\n            onChange={serverRootChanged}\n          />\n          <br></br>\n          <br></br>\n\n          <label>Authentication</label>\n          <table>\n            <tbody>\n              <tr><td>Bearer Token</td></tr>\n              <tr><td>\n                <InputGroup\n                  placeholder=\"Enter a bearer token...\"\n                  rightElement={lockButton}\n                  type={showPassword ? \"text\" : \"password\"}\n                  onInput={tokenInput}\n                />\n              </td></tr>\n            </tbody>\n          </table>\n          <br></br>\n          <br></br>\n\n          <label>Data Tag</label>\n          <table>\n            <tbody>\n              <tr>\n                <td>\n                  <label>system</label>\n                </td>\n                <td>\n                  <input\n                    className=\"url\"\n                    type=\"text\"\n                    value={tagSystem}\n                    onChange={tagSystemChanged}\n                  />\n                </td>\n              </tr>\n              <tr>\n                <td>\n                  <label>code</label>\n                </td>\n                <td>\n                  <input\n                    type=\"text\"\n                    value={tagCode}\n                    onChange={tagCodeChanged}\n                  />\n                </td>\n              </tr>\n            </tbody>\n          </table>\n          <Button type=\"submit\" disabled={!validURL}>Apply</Button>\n        </form>\n      </Collapse>\n    </>\n  );\n}\n\nclass HeaderPanel extends React.Component {\n  render() {\n    return (\n      <div>\n        <span className=\"app-title\">{appTitle}</span>\n        <ServerInputForm\n          bearerToken={this.props.bearerToken}\n          developerMessages={this.props.developerMessages}\n          serverRootURL={this.props.serverRootURL}\n          setBearerToken={this.props.setBearerToken}\n          setDeveloperMessages={this.props.setDeveloperMessages}\n          setServerRootURL={this.props.setServerRootURL}\n          setTagCode={this.props.setTagCode}\n          setTagSystem={this.props.setTagSystem}\n          tagCode={this.props.tagCode}\n          tagSystem={this.props.tagSystem}\n      />\n      </div>  \n    );\n  }\n}\n\nexport default HeaderPanel;\n","// TODO: consider renaming this file\n\nexport const codeSystem = \"http://argonautproject.org/patient-lists/CodeSystem/characteristics\";\nexport const demoTag = {\n  system: 'http://connectathon.fhir.org/',\n  code: '2020-sep',\n};\n\n\n// Returns the non-empty resources from a bundle.\nfunction getResources(bundle) {\n  return bundle && bundle.entry ? bundle.entry.map(e => e.resource).filter(Boolean) : [];\n}\n\n// Returns the patient list characteristics matching a code (ie 'at-location').\nfunction getCharacteristics(resources, code) {\n  const hasChars = resources.flatMap(x => x.characteristic).filter(Boolean);\n  return hasChars.filter(\n    x => x.code && x.code.coding && x.code.coding.some(\n      c => c.system === codeSystem && c.code === code\n    )\n  );\n}\n\n// Returns the sorted set of code references from lists in a bundle.\nexport function getRefsFrom(bundle, code) {\n  const resources = getResources(bundle);\n  if (!resources) {\n    return [];\n  }\n  const ch7istics = getCharacteristics(resources, code);\n  const locations = new Set(ch7istics.map(x => x.valueReference.reference));\n  return [...locations].sort();\n}\n\n// NICE: When the results include resources of different types, there should be\n//       separate bundles per type.  So, if the first pages of bundles contain\n//       Group followed by pages of Patient bundles - the returned value should be\n//       a list of 2 bundles with all the Groups and Patients separated.\n\n// NICE: Don't return a Bundle.  Instead return a list of tuples: [[ResourceType, [resources]], ...]\n\n// Returns a de-paginated bundle of resources from an initial URL.\nexport async function drain(resourceUrl, bearerToken, progressCallback) {\n  const bundles = [];\n  let url = resourceUrl;\n  const authorization = {\n    headers: {\n      Authorization: `Bearer ${bearerToken}`\n    }\n  }\n  do {\n    // Fetch a bundle from the URL.\n    await fetch(url, bearerToken ? authorization : undefined)\n      .then(response => response.json())\n      .then(bundle => bundles.push(bundle));\n    const newBundle = bundles.pop();\n    if (!newBundle.entry) { newBundle.entry = []; }\n\n    // If the search was paginated, prepare to fetch the following bundle.\n    const next = newBundle.link.filter(x => x.relation === 'next');\n    url = next.length ? next[0].url : undefined;\n\n    // Build up the entries in the first bundle to include entries from all.\n    if (bundles.length === 0) {\n      bundles.push(newBundle);\n    } else {\n      bundles[0].entry.push(...newBundle.entry);\n    }\n\n    // Inform the caller of the current progress via callback, if defined.\n    if (progressCallback && bundles.length && bundles[0].entry) {\n      progressCallback(bundles[0].entry.length, bundles[0].total);\n    }\n  } while (url);\n  return bundles[0];\n}\n\n// Returns a list of resources from a bundle based on in-app selections.\nexport function filterLists(lists, selections) {\n  // Shallow-copy the list.\n  const listsCopy = [...lists];\n\n  // TODO: apply the filter by removing lists that match no selections.\n  if (selections.length) {\n    console.warn('Not Implemented yet: api.filterLists', selections);  // XXX\n  }\n\n  // Sort the remaining lists by name.\n  return listsCopy.sort((a, b) => {\n    const left = a.resource.name || '';\n    const right = b.resource.name || '';\n    return left.localeCompare(right);\n  });\n}\n","/*\n  A component that wraps a FHIR resource, enabling a hover-text popup with\n  additional details about the resource.\n\n  <Resource\n    resource={resource}\n    display={resource.name}\n    getHoverData={(resource) => {\n      return [\n        ['id', resource.id],\n        ['url', resource.url],\n        ['name', resource.name],\n      ];\n    }}\n    />\n  \n  NICE\n    [ ] hover-text shows extra details in a *focusable* pop-up panel\n*/\nimport React from 'react'\nimport { Tooltip } from \"@blueprintjs/core\";\n\nexport function Resource(props) {\n  const resource = props.resource;\n  const reference = `${resource.resourceType}/${resource.id}`\n  const display = props.display || reference;\n  const disabled = props.getHoverData ? false : true;\n  let hoverContent = <table/>;  // placeholder\n  if (props.getHoverData) {\n    hoverContent = (\n      <table>\n        <tbody>\n          {\n            props.getHoverData(resource).map(([attribute, value]) => {\n              return (\n                <tr key={`${reference}.${attribute}`}>\n                  <td style={{fontWeight: 'bold'}}>{attribute}</td>\n                  <td>{value}</td>\n                </tr>\n              );\n            })\n          }\n        </tbody>\n      </table>\n    );\n  }\n  // TODO: figure out how to enable the tool-top to be focused when hovered-over.\n  return (\n    <Tooltip\n      content={hoverContent}\n      disabled={disabled}\n      transitionDuration={100}\n      intent=\"primary\"\n      boundary=\"viewport\"\n      hoverCloseDelay={1000}\n      enforceFocus={false}\n    >\n      <span>{display}</span>\n    </Tooltip>\n  );\n}\n","import { drain, getRefsFrom, filterLists } from 'api';\nimport React from 'react';\nimport { Radio, RadioGroup } from \"@blueprintjs/core\";\nimport { Resource } from 'components/FHIRResource';\n\nconst debug = false;  // XXX\n\n// TODO: move this to a FHIRGroup module?\n// TODO: create a src.components.fhir folder?\n\n// A FHIR Resource in a table row.\nfunction ResourceRow(props) {\n  const resource = props.resource;\n  const key = `${resource.resourceType}/${resource.id}`;\n  return (\n    <Radio\n      key={key}\n      value={key}\n    >\n      <Resource\n        display={resource.name}\n        resource={resource}\n        getHoverData={(resource) => {\n          return [\n            ['reference', (\n              <a\n                href={encodeURI(`${props.serverRootURL}/${key}`)}\n                style={{color: 'yellow'}}\n                rel=\"noopener noreferrer\"\n                target=\"_blank\"\n              >\n                {key}\n              </a>\n            )],\n            ['actual', resource.actual ? 'true' : 'false'],\n            ['type', resource.type],\n            ['members', resource.member ? resource.member.length : 0],\n            // TODO: add any other relevant hover-text fields here.\n          ];\n        }}\n      />\n    </Radio>\n  );\n}\n\n// A sorted list of patient lists, pre-filtered by the current filter selection.\nfunction ListSelector(props) {\n  // TODO: pull this up to the main panel.\n  const [selectedList, setSelectedList] = React.useState();\n  if (!props.lists) {\n    return <></>;\n  }\n\n  function getList(reference) {\n    return props.lists.filter(\n      (x) => `Group/${x.resource.id}` === reference\n    )[0];\n  }\n\n  return (\n    <RadioGroup\n      onChange={(e) => {\n        setSelectedList(e.target.value);\n        props.handleListSelection(getList(e.target.value).resource);\n      }}\n      selectedValue={selectedList}\n    >{\n        props.lists.map((x) => {\n          return ResourceRow({\n            handleListSelection: props.handleListSelection,\n            resource: x.resource,\n            serverRootURL: props.serverRootURL,\n          });\n        })\n      }\n    </RadioGroup>\n  );\n}\n\n// A panel of selectable patient lists with optional filters.\nclass ListsPanel extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      groups: [],\n      groupsIncluded: [],\n      locations: [],\n      locationsIncluded: [],\n      serverRoot: props.serverRootURL,\n      bearerToken: props.bearerToken,\n      tagCode: props.tagCode,\n      tagSystem: props.tagSystem,\n    };\n    this.handleListSelection = this.handleListSelection.bind(this);\n  }\n\n  // NICE: update something on-screen while data is loading.\n  progressCallback(resourceType, loaded, total) {\n    if (debug) {\n      console.log(`Loaded ${loaded} of ${total} ${resourceType} records`);\n    }\n  }\n\n  // Returns a URL to refresh an optionally tagged resource type which may _include other types.\n  getRefreshQueryUrl(resourceType, includes) {\n    const params = [];\n    if (this.props.tagSystem && this.props.tagCode) {\n      params.push(['_tag', `${this.props.tagSystem}|${this.props.tagCode}`]);\n    }\n    if (includes && includes.length) {\n      params.push(...includes.map(x => ['_include', x]));\n    }\n    const encodedParamString = params\n      .map(kv => kv.map(encodeURIComponent).join(\"=\"))\n      .join(\"&\");\n    const query = encodedParamString ? `?${encodedParamString}` : '';\n    return `${this.props.serverRootURL}/${resourceType}${query}`;\n  }\n\n  refreshResources(resourceType, stateLocation, includes, validator) {\n    const url = this.getRefreshQueryUrl(resourceType, includes);\n    drain(url, this.props.bearerToken, (x, total) => { this.progressCallback(resourceType, x, total); })\n      .then((bundle) => {\n        const newState = {};\n        const resources = bundle.entry.filter(e => e.resource.resourceType === resourceType);\n        const included = bundle.entry.filter(e => e.resource.resourceType !== resourceType);\n        newState[stateLocation] = resources;\n        newState[`${stateLocation}Included`] = included;\n        if (validator) {\n          resources.map(x => validator(resourceType, x));\n        }\n        this.setState(newState);\n      });\n  }\n\n  refreshData() {\n    this.props.setPatients([]);\n    //this.props.setSelectedList(undefined);\n    this.refreshResources('Group', 'groups', ['Group:member']);\n    this.refreshResources('Location', 'locations');\n    // NICE: examine the fetched data, logging a warning to DeveloperPanel if any look malformed\n  }\n\n  componentDidMount() {\n    this.refreshData();\n  }\n\n  componentDidUpdate() {\n    // Refresh ALL the cached data when the server component has changed.\n    const needsRefresh =\n      (this.state.serverRoot !== this.props.serverRootURL) ||\n      (this.state.bearerToken !== this.props.bearerToken) ||\n      (this.state.tagCode !== this.props.tagCode) ||\n      (this.state.tagSystem !== this.props.tagSystem);\n\n    if (needsRefresh) {\n      this.refreshData();\n      this.setState({\n        serverRoot: this.props.serverRootURL,\n        bearerToken: this.props.bearerToken,\n        tagCode: this.props.tagCode,\n        tagSystem: this.props.tagSystem,\n      });\n    }\n  }\n\n  // BUG: This app assumes that a Group's member.entity contains a 'reference' to a patient.\n  //      The 'reference' member.entity attribute is technically optional - there are other\n  //      ways to represent a reference to a list member.\n  //      Maybe a validator can log a warning about that earlier in the UI when encountered\n  //      (and fail gracefully).\n\n  // TODO: move this logic to the api.js module, since it has nothing to do with rendering and\n  //       everything to do with the new API.\n\n  // TODO: include the FHIR server root URL in case it's needed to fetch a patient that's not\n  //       in the cache already.\n\n  // Returns the complete list of Patient resources who are members of a list.\n  resolvePatients(list, cachedPatients) {\n\n    // Returns the reference for a list member from the list.member fragment.\n    function getReference(member) {\n      if (member && member.entity) {\n        return member.entity.reference;\n      }\n      console.log('resolvePatients.getReference: unknown reference type in:', list);\n    }\n\n    const members = list.member ? list.member : [];\n    const memberRefs = new Set(members.map(getReference).filter(x => x));\n\n    // NICE: if the member is not in the cache, log a warning somewhere, or maybe fetch it.\n\n    return cachedPatients\n      .map(x => x.resource)\n      .filter(r => memberRefs.has(`${r.resourceType}/${r.id}`)\n    );\n  }\n\n  handleListSelection(resource) {\n    if (!resource.member) {\n      this.props.setPatients([]);\n    } else {\n      this.props.setPatients(\n        this.resolvePatients(resource, this.state.groupsIncluded)\n      );\n    }\n  }\n\n  render() {\n    const lists = this.state.groups;\n    // TODO: group the characteristics selections into one function.\n    const locations = getRefsFrom(lists, 'at-location');\n    const orgs = getRefsFrom(lists, 'attributed-to-organization');\n    const docs = getRefsFrom(lists, 'attributed-to-practitioner');\n    const careTeams = getRefsFrom(lists, 'attributed-to-careteam');\n    // TODO: get the component selections, saving them into an object.\n    // TODO: also collect Orgs and Docs from the ManagingEntity field (either should work).\n    if (debug) {\n      console.log('render selections from', locations, orgs, docs, careTeams);  // XXX\n    }\n    const selections = [];\n\n    // TODO: pass in a hook state for the selectedList and a setter.  This will allow a data refresh to\n    //       un-select the current selected list (which would be needed when changing servers).\n\n    // NICE: turn this into a NavBar: https://blueprintjs.com/docs/#core/components/navbar followed by a scrollable ListSelector\n    return (\n      <>\n        <div style={{ fontWeight: 'bold' }} >\n          Patient Lists ({this.state.groups.length})\n        </div>\n        <div style={{ overflowY: 'scroll' }} >\n          <ListSelector\n            handleListSelection={this.handleListSelection}\n            lists={filterLists(lists, selections)}\n            serverRootURL={this.props.serverRootURL}\n            bearerToken={this.props.bearerToken}\n          />\n        </div>\n      </>\n    );\n  }\n}\n\nexport default ListsPanel;","import React from 'react';\nimport 'components/DeveloperPanel.css'\nimport { Button, Callout, Collapse } from \"@blueprintjs/core\";\n\n// NICE: enable this panel to be resized up and down.\n\nexport default function DeveloperPanel(props) {\n  let messages = props.developerMessages || <pre key=\"0\">None</pre>;\n  const [isHidden, setIsHidden] = React.useState(true);\n\n  return (\n    <>\n      <Button\n        onClick={() => {setIsHidden(!isHidden)}}\n        style={{zIndex: 1, position: 'relative'}}\n      >\n        {isHidden ? \"Show\" : \"Hide\"} Developer Messages\n      </Button>\n      <Collapse isOpen={!isHidden}>\n        <Callout title=\"Developer Messages (Most Recent At Top)\">\n          <div style={{overflowY: 'scroll'}}>\n            {messages}\n          </div>\n        </Callout>\n      </Collapse>\n    </>\n  );\n}\n","import React from 'react';\nimport 'components/PatientsPanel.css'\nimport { HTMLTable } from '@blueprintjs/core';\n\n// TODO: decide how to enable the on-hover data for patients, just like in the lists panel\n\nfunction getRow(patient, attributeGetters) {\n  return attributeGetters.map(getter => getter[1](patient));\n}\n\nfunction getData(patients, attributeGetters) {\n  return patients.map(patient => getRow(patient, attributeGetters));\n}\n\nfunction getName(patient) {\n  if (patient && patient.name) {\n    const officialNames = patient.name.filter(name => name.use === 'official');\n    if (officialNames.length) {\n      const name = officialNames[0];\n      const names = name.given.map(fn => `${fn} ${name.family}`);\n      if (names.length) {\n        return names[0].replace(/[0-9]/g, '');\n      }\n    }\n  }\n  return 'J. Doe';\n}\n\nfunction getAge(patient) {\n  const ageMs = Date.now() - Date.parse(patient.birthDate);\n  return Math.trunc(new Date(ageMs).getUTCFullYear() - 1970);\n}\n\nconst patientAttributeGetters = [\n  ['ID', p => p.id],\n  ['Name', getName],\n  ['Age', getAge],\n  ['Sex', p => p.gender === 'female' ? 'F' : 'M'],\n];\n\nexport default function PatientsPanel(props) {\n  const getters = [...patientAttributeGetters, ...props.extraAttributeGetters];\n  const columns = getters.map(x => x[0]);\n  return (\n    <>\n      <div style={{ fontWeight: 'bold' }} >\n        Patients ({props.patients.length} selected)\n      </div>\n      <span style={{ overflowY: 'scroll' }} >\n        <HTMLTable condensed={true} interactive={true}>\n          <thead>\n            <tr key=\"patientsPanelHeaders\">{columns.slice(1).map(x =>\n              <th key={x}>{x}</th>\n            )}</tr>\n          </thead>\n          <tbody>\n            {getData(props.patients, getters).map(row =>\n              <tr key={`patientsPanelPatient/${row[0]}`}>{row.slice(1).map((col, i) =>\n                <td key={`Patient/${row[0]}/${i}`}>{col}</td>\n              )}</tr>\n            )}\n          </tbody>\n        </HTMLTable>\n      </span>\n    </>\n  );\n}\n","import React from 'react';\nimport 'components/AttributesPanel.css'\nimport { Checkbox, HTMLTable } from '@blueprintjs/core';\n\n// NICE: reveal this panel by clicking a Button.\n\nfunction getConditions(patient) {\n  return ['Asthma', 'Fibromyalgia', 'Cancer'];\n}\n\nfunction getLatestEncounter(patient) {\n  return '2020-08-21';\n}\n\nfunction getLastImmunization(patient) {\n  return '2019-12-26';\n}\n\nfunction getLocation(patient) {\n  return 'Ward 1';\n}\n\nfunction getPCP(patient) {\n  // TODO: implement this\n  return 'Dr. Doe';\n}\n\nconst extraAttributeGetters = [\n  ['Conditions', getConditions],\n  ['Current Location', getLocation],\n  ['Last Immunization', getLastImmunization],\n  ['Latest Encounter', getLatestEncounter],\n  ['PCP', getPCP],\n];\n\n// TODO: decide what the tooltip will contain when hovering over the row.\nexport default function ExtraAttributesPanel(props) {\n  // Applies the changes.\n  function handleAttributeSelected(event, what) {\n    const setColumns = props.setExtraAttributeGetters;\n    if (event.target.checked) {\n      setColumns([...props.extraAttributeGetters, what]);\n    } else {\n      setColumns(props.extraAttributeGetters.filter(x => x[0] !== what[0]));\n    }\n  }\n\n  return (\n    <>\n      <div style={{ fontWeight: 'bold' }} >\n        Extra Attributes\n      </div>\n      <span style={{ overflowY: 'scroll' }} >\n        <HTMLTable condensed={true}>\n          <tbody>\n            {extraAttributeGetters\n              .map(x =>\n                <tr key={x[0]}>\n                  <td>\n                    <Checkbox\n                      onChange={(e) => handleAttributeSelected(e, x)}\n                      checked={props.isChecked}\n                    >\n                      {x[0]}\n                    </Checkbox>\n                  </td>\n                </tr>\n              )\n            }\n          </tbody>\n        </HTMLTable>\n      </span>\n    </>\n  );\n}\n","import React, {useState} from 'react';\nimport HeaderPanel from 'components/HeaderPanel';\nimport ListsPanel from 'components/ListsPanel';\nimport DeveloperPanel from 'components/DeveloperPanel';\nimport PatientsPanel from 'components/PatientsPanel';\nimport ExtraAttributesPanel from 'components/AttributesPanel';\n\nimport './App.css';\nimport \"normalize.css\";\nimport '@blueprintjs/icons/lib/css/blueprint-icons.css';\nimport '@blueprintjs/core/lib/css/blueprint.css';\nimport '@blueprintjs/select/lib/css/blueprint-select.css';\n\n// TODO: update this with the public-facing URL, when it's available.\n//const defaultServerRootURL = \"http://localhost:8080/hapi-fhir-jpaserver/fhir/\";\nconst defaultServerRootURL = 'https://hapi.fhir.org/baseR4/';\nconst defaultTagSystem = 'http://hl7.org/Connectathon'\nconst defaultTagCode = '2020-Sep'\n\nfunction App() {\n  const [developerMessages, setDeveloperMessages] = useState([]);\n  const [extraAttributeGetters, setExtraAttributeGetters] = useState([]);\n  const [patients, setPatients] = useState([]);\n  const [serverRootURL, setServerRootURL] = useState(defaultServerRootURL);\n  const [bearerToken, setBearerToken] = useState('');\n  const [tagSystem, setTagSystem] = useState(defaultTagSystem);\n  const [tagCode, setTagCode] = useState(defaultTagCode);\n\n  React.useEffect(() => {\n    const message = (\n      <pre key={Date.now()}>Updated FHIR Server root to: {serverRootURL}</pre>\n    );\n    setDeveloperMessages(d => [message, ...d]);\n  }, [serverRootURL]);\n\n  return (\n    <div className=\"App\">\n      <div className=\"row\">\n        <div className=\"top\">\n          <HeaderPanel\n            bearerToken={bearerToken}\n            developerMessages={developerMessages}\n            serverRootURL={serverRootURL}\n            setBearerToken={setBearerToken}\n            setDeveloperMessages={setDeveloperMessages}\n            setServerRootURL={setServerRootURL}\n            setTagCode={setTagCode}\n            setTagSystem={setTagSystem}\n            tagCode={tagCode}\n            tagSystem={tagSystem}\n          /></div>\n      </div>\n\n      <div className=\"row\">\n        <div className=\"left\">\n          <ListsPanel\n            bearerToken={bearerToken}\n            developerMessages={developerMessages}\n            serverRootURL={serverRootURL}\n            setDeveloperMessages={setDeveloperMessages}\n            setPatients={setPatients}\n            tagCode={tagCode}\n            tagSystem={tagSystem}\n          />\n        </div>\n        <div className=\"center\">\n          <PatientsPanel\n            bearerToken={bearerToken}\n            extraAttributeGetters={extraAttributeGetters}\n            patients={patients}\n            setDeveloperMessages={setDeveloperMessages}\n          />\n        </div>\n        <div className=\"right\">\n          <ExtraAttributesPanel\n            bearerToken={bearerToken}\n            extraAttributeGetters={extraAttributeGetters}\n            setExtraAttributeGetters={setExtraAttributeGetters}\n          />\n        </div>\n      </div>\n\n      <div className=\"row\">\n        <div className=\"bottom\">\n          <DeveloperPanel\n            developerMessages={developerMessages}\n          />\n        </div>\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\n// Returns a DemoApp either in strict or 'normal' mode.\nfunction DemoApp(props) {\n  if (props.strict) {\n    return (\n      <React.StrictMode>\n        <App />\n      </React.StrictMode>\n    );\n  }\n  return <App />;\n}\n\nReactDOM.render(\n  <DemoApp strict={false} />,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}